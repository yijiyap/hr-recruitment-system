<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script
        src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp,container-queries"></script>
    <script>
        tailwind.config = {
            prefix: 'tw-',
            corePlugins: {
                preflight: false,
            },
        }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="https://unpkg.com/vue-router@next"></script>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>

    <div id="app">
        <router-view></router-view>
        <h1 class="tw-text-3xl tw-font-bold tw-underline tw-text-center">
            Indorama Ventures HR Internship Recruitment System
        </h1>

        <h2 class="tw-text-2xl tw-font-bold tw-text-center tw-mt-5">
            1. Choose role to hire
        </h2>

        <!-- Filter button at the right of the page -->
        <div class="tw-flex tw-justify-end tw-mt-5 tw-mr-5">
            <button class="btn btn-secondary">Filter</button>
        </div>

        <!-- List of roles to hire in bootstrap cards -->
        <div class="container">
            <div class="row gy-2">
                <div v-for="(role, roleId) in rolesToHire" :key="roleId" class="col-md-3">
                    <div class="card" style="width: 18rem;">
                        <img src="..." class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Role to hire: {{ role.roleName }}</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Department: {{ role.department }}</li>
                            <li class="list-group-item">Supervisor: {{ role.supervisor }}</li>
                            <li class="list-group-item">Expected Internship Period: <br />{{
                                role.expectedInternshipPeriod }}</li>
                        </ul>
                        <div class="card-body text-center">
                            <button @click="getMoreInfo(roleId)" class="btn btn-secondary text-center">Get more
                                info</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const app = Vue.createApp({
            data() {
                return {
                    "rolesToHire": {
                        "role1": {
                            "roleName": "HR Intern",
                            "department": "HRHO",
                            "supervisor": "Uklit",
                            "expectedInternshipPeriod": "May 2025 - August 2025"
                        },
                        "role2": {
                            "roleName": "HR Intern",
                            "department": "HRHO",
                            "supervisor": "Natnisha",
                            "expectedInternshipPeriod": "May 2025 - August 2025"
                        },
                        "role3": {
                            "roleName": "HR Intern",
                            "department": "HRHO",
                            "supervisor": "Amy",
                            "expectedInternshipPeriod": "May 2025 - August 2025"
                        },
                        "role4": {
                            "roleName": "HR Intern",
                            "department": "HRHO",
                            "supervisor": "Patchy",
                            "expectedInternshipPeriod": "May 2025 - August 2025"
                        },
                        "role5": {
                            "roleName": "HR Intern",
                            "department": "HRHO",
                            "supervisor": "Pao",
                            "expectedInternshipPeriod": "May 2025 - August 2025"
                        
                        }
                    }
                };
            }, // data
            // computed: { 
            //     derivedProperty() {
            //         return false;
            //     }  
            // }, // computed
            // created() { 
            // },
            // mounted() { 
            // },
            methods: {
                getMoreInfo(roleId) {
                    // call the backend to get more info
                    // fetch(`http://localhost:3000/ds/${roleId}`)
                    //     .then(response => response.json())
                    //     .then(data => {
                    //         console.log(data);

                    //         //Encode the data as a query parameter
                    //         const query = encodeURIComponent(JSON.stringify(data));

                    //         // redirect to the next page
                    //         window.location.href = `/role?data=${query}`;

                    //     });
                    fetch(`http://localhost:5002/ping`, {method: 'GET'})
                        .then(response => response.json())
                        .then(data => {
                            console.log(data);

                            //Encode the data as a query parameter
                            const query = data["msg"];

                            console.log(query);

                            // redirect to the next page
                            window.location.href = `role.html?data=${query}`; // changes to http://127.0.0.1:5500/hr-recruitment-system/frontend/role.html?data=pong

                            // supposed to send to http://127.0.0.1:5500/hr-recruitment-system/frontend/...
                        });
                },

            } // methods
        });
        const vm = app.mount('#app');

    </script>
</body>

</html>